<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>GROUPIE-TRACKER</title>
    <link rel="stylesheet" href="../static/css/styles.css" />
    <link rel="shortcut icon" href="/static/img/icons8.png" type="image/x-icon">
  </head>
  <body>
    <header class="header container">
      <div class="header__div">
        <div class="header__logo">
          <p>// music group</p>
        </div>

        <div class="header__center">
          <div class="header__main">
            <a class="header__alm" href="https://alem.school/" target="_blank"
              >AL&#123;M</a
            >
            <form action="#" class="header__input">
              <p>&#123;</p>
              <!-- <input type="search"> -->
              <!-- search start -->
              <div class="header__search-results-wrapper">
                <input type="text" id="myInput" onkeyup="myFunction()" />
                <ul
                  id="myUL"
                  class="header__search-results"
                  style="display: none"
                >
                  {{range $i1, $v := .}}
                  <li><a href="/artist?id={{$v.ID}}">"{{$v.Name}}"</a></li>
                  <li>
                    <a href="/artist?id={{$v.ID}}"
                      >"{{$v.Name}}/{{$v.CreationDate}}"</a
                    >
                  </li>
                  <li>
                    <a href="/artist?id={{$v.ID}}"
                      >"{{$v.Name}}/{{$v.FirstAlbum}}"</a
                    >
                  </li>

                  {{range $i2, $artist := $v.Members}}
                  <li>
                    <a href="/artist?id={{$v.ID}}">"{{$v.Name}}/{{$artist}}"</a>
                  </li>
                  {{end}} {{range $locations, $concert_dates:= $v.Relations}}
                  <li>
                    <a href="/artist?id={{$v.ID}}"
                      >"{{$v.Name}}/{{$locations}}"</a
                    >
                  </li>
                  {{range $i3, $date:=$concert_dates}}
                  <li>
                    <a href="/artist?id={{$v.ID}}">"{{$v.Name}}/{{$date}}"</a>
                  </li>
                  {{end}} {{end}} {{end}}
                </ul>
              </div>
              <!-- search end -->
              <p>&#125;</p>
              <button class="headersvg"></button>
            </form>
            <p class="header__filtres">filters</p>
          </div>

          <!-- filter start -->
          <div class="pt">
            <div class="container filter">
              <form action="/filters/" method="GET">
                <div class="wrapper_first">
                  <div class="wrapper">
                    <h2>create date /</h2>

                    <div class="price-input">
                      <div class="field">
                        <span class="form_to">from:</span>
                        <span class="range" id="range1">1958</span>
                      </div>
                      <div class="field">
                        <span class="form_to">to:</span>
                        <span class="range" id="range2">2015</span>
                      </div>
                    </div>

                    <div class="container-range">
                      <div class="slider-track create_date-track"></div>
                      <input
                        type="range"
                        name="MinCreationDate"
                        min="1958"
                        max="2015"
                        value="1958"
                        id="slider-1"
                        oninput="slideOne()"
                      />
                      <input
                        type="range"
                        name="MaxCreationDate"
                        min="1958"
                        max="2015"
                        value="2015"
                        id="slider-2"
                        oninput="slideTwo()"
                      />
                    </div>
                  </div>
                  <div class="wrapper">
                    <h2>first album date /</h2>

                    <div class="price-input">
                      <div class="field">
                        <span class="form_to">from:</span>
                        <span class="range" id="range3">1963</span>
                      </div>
                      <div class="field">
                        <span class="form_to">to:</span>
                        <span class="range" id="range4">2018</span>
                      </div>
                    </div>

                    <div class="container-range">
                      <div class="slider-track first_album-track"></div>
                      <input
                        type="range"
                        name="MinFirstAlbumDate"
                        min="1963"
                        max="2018"
                        value="1963"
                        id="slider-3"
                        oninput="slideThree()"
                      />
                      <input
                        type="range"
                        name="MaxFirstAlbumDate"
                        min="1963"
                        max="2018"
                        value="2018"
                        id="slider-4"
                        oninput="slideFour()"
                      />
                    </div>
                  </div>
                  <div class="wrapper location">
                    <h2>location /</h2>
                    <div class="search dark">
                      <div class="form__search">
                        <input
                          class="tags"
                          type="search"
                          autocomplete="off"
                          name="loc"
                          placeholder="Add..."
                        />
                        <button onclick="addTagByButton()" type="button">
                          <svg
                            xmlns="http://www.w3.org/2000/svg"
                            width="22"
                            height="22"
                            viewBox="0 0 22 22"
                            fill="none"
                          >
                            <path
                              d="M4.58337 11.9167V11H10.0834V5.5H11V11H16.5V11.9167H11V17.4167H10.0834V11.9167H4.58337Z"
                              fill="black"
                            />
                          </svg>
                        </button>
                      </div>
                      <div class="content">
                        <ul class="ul"></ul>
                      </div>
                      <div class="details">
                        <p><span>10</span> tags are remaining</p>
                        <button>Remove All</button>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="wrapper_second">
                  <div class="members wrapper">
                    <h2>members /</h2>
                    <div class="members__items">
                      <input type="checkbox" id="1" name="Member1" />
                      <label for="1">
                        <span>1</span>
                      </label>
                      <input type="checkbox" id="2" name="Member2" />
                      <label for="2">
                        <span>2</span>
                      </label>
                      <input type="checkbox" id="3" name="Member3" />
                      <label for="3">
                        <span>3</span>
                      </label>
                      <input type="checkbox" id="4" name="Member4" />
                      <label for="4">
                        <span>4</span>
                      </label>
                      <input type="checkbox" id="5" name="Member5" />
                      <label for="5">
                        <span>5</span>
                      </label>
                      <input type="checkbox" id="6" name="Member6" />
                      <label for="6">
                        <span>6</span>
                      </label>
                      <input type="checkbox" id="7" name="Member7" />
                      <label for="7">
                        <span>7</span>
                      </label>
                      <input type="checkbox" id="8" name="Member8" />
                      <label for="8">
                        <span>8</span>
                      </label>
                    </div>
                  </div>
                  <button class="submit" type="submit"><b>apply</b></button>
                </div>
              </form>
            </div>
          </div>
          <!-- filter end -->
        </div>

        <div class="header__home">
          <a href="/">home</a>
        </div>
      </div>
    </header>

    <div class="line"></div>

    {{if .}}
    <section class="main__content container">
      {{range $i, $v := .}}
      <a class="band" href="/artist?id={{$v.ID}}" alt="{{$v.Name}}">
        <img
          class="band__banner"
          src="{{$v.Image}}"
          alt="banner of {{$v.Name}}"
        />
        <h2 class="band__name">{{$v.Name}}</h2>
      </a>
      {{end}}
    </section>
    {{end}}
    <footer class="footer">
      <div class="container contfooter">
        <div class="footer__contacnt">
          <p class="footer__hub">Github /</p>
          <a
            class="footer__link"
            href="https://github.com/ArtEmerged"
            target="_blank"
            >ArtEmerged</a
          >
          <a
            class="footer__link"
            href="https://github.com/grenkoff"
            target="_blank"
            >grenkoff</a
          >
          <a
            class="footer__link"
            href="https://github.com/NordStream777"
            target="_blank"
            >NordStream777</a
          >
        </div>
        <div class="footer__main">
          <p class="footer__art">&#123; 2023 Artyom Echeistov &#125;</p>
        </div>
        <div class="footer__last">
          <a
            class="footer__link"
            href="https://github.com/01-edu/public/blob/master/subjects/groupie-tracker/README.md"
            target="_blank"
            >About project</a
          >
          <a
            class="footer__link"
            href="https://github.com/01-edu/public/blob/master/subjects/groupie-tracker/audit/README.md"
            target="_blank"
            >Helps</a
          >
          <p class="footer__hub">// MD 2023</p>
        </div>
      </div>
    </footer>
    <!-- start script search -->
    <script>
      function myFunction() {
        // Получаем значение из поля ввода
        var input, filter, ul, li, a, i;
        input = document.getElementById("myInput");
        filter = input.value.toUpperCase();
        ul = document.getElementById("myUL");
        li = ul.getElementsByTagName("li");

        // Перебираем элементы списка и скрываем те, которые не соответствуют поисковому запросу
        for (i = 0; i < li.length; i++) {
          a = li[i].getElementsByTagName("a")[0];
          if (a.innerHTML.toUpperCase().indexOf(filter) > -1) {
            li[i].style.display = "";
          } else {
            li[i].style.display = "none";
          }
        }

        // Показываем или скрываем весь список в зависимости от наличия совпадений
        if (filter === "") {
          ul.style.display = "none";
        } else {
          ul.style.display = "block";
        }
      }
    </script>
    <!-- end script search -->

    <!-- start filter  -->
    <script>
      window.onload = function () {
        document.body.classList.add("loaded_hiding");
        window.setTimeout(function () {
          document.body.classList.add("loaded");
          document.body.classList.remove("loaded_hiding");
        }, 500);

        slideOne();
        slideTwo();
        slideThree();
        slideFour();
      };

      let sliderOne = document.getElementById("slider-1");
      let sliderTwo = document.getElementById("slider-2");
      let displayValOne = document.getElementById("range1");
      let displayValTwo = document.getElementById("range2");
      let minGap = 0;
      let sliderTrack = document.querySelector(".create_date-track");
      let sliderMaxValue = parseInt(sliderOne.max);

      function slideOne() {
        if (parseInt(sliderTwo.value) - parseInt(sliderOne.value) <= minGap) {
          sliderOne.value = parseInt(sliderTwo.value) - minGap;
        }
        displayValOne.textContent = sliderOne.value;
        fillColor();
      }
      function slideTwo() {
        if (parseInt(sliderTwo.value) - parseInt(sliderOne.value) <= minGap) {
          sliderTwo.value = parseInt(sliderOne.value) + minGap;
        }
        displayValTwo.textContent = sliderTwo.value;
        fillColor();
      }
      function fillColor() {
        const range = sliderMaxValue - parseInt(sliderOne.min);
        const percent1 =
          ((sliderOne.value - parseInt(sliderOne.min)) / range) * 100;
        const percent2 =
          ((sliderTwo.value - parseInt(sliderOne.min)) / range) * 100;
        sliderTrack.style.background = `linear-gradient(to right, #dadae5 ${percent1}%, #272b33 ${percent1}%, #272b33 ${percent2}%, #dadae5 ${percent2}%)`;2
      }

      // ------------------------------------------------------------------------------------

      let sliderThree = document.getElementById("slider-3");
      let sliderFour = document.getElementById("slider-4");
      let displayValThree = document.getElementById("range3");
      let displayValFour = document.getElementById("range4");
      let minGapAlbum = 0;
      let sliderTrackAlbum = document.querySelector(".first_album-track");
      let sliderMaxValueAlbum = document.getElementById("slider-3").max;

      function slideThree() {
        if (
          parseInt(sliderFour.value) - parseInt(sliderThree.value) <=
          minGapAlbum
        ) {
          sliderThree.value = parseInt(sliderFour.value) - minGapAlbum;
        }
        displayValThree.textContent = sliderThree.value;
        fillColorAlbum();
      }
      function slideFour() {
        if (
          parseInt(sliderFour.value) - parseInt(sliderThree.value) <=
          minGapAlbum
        ) {
          sliderFour.value = parseInt(sliderThree.value) + minGapAlbum;
        }
        displayValFour.textContent = sliderFour.value;
        fillColorAlbum();
      }
      function fillColorAlbum() {
        const range = sliderMaxValueAlbum - parseInt(sliderThree.min);
        const percent1 =
          ((sliderThree.value - parseInt(sliderThree.min)) / range) * 100;
        const percent2 =
          ((sliderFour.value - parseInt(sliderThree.min)) / range) * 100;
        sliderTrackAlbum.style.background = `linear-gradient(to right, #dadae5 ${percent1}%, #272b33 ${percent1}%, #272b33 ${percent2}%, #dadae5 ${percent2}%)`;
      }
      // ------------------------------------------------------------------------------------
      const ul = document.querySelector(".ul");
      const input = document.querySelector(".tags");
      const tagNumb = document.querySelector(".details span");

      // let maxTags = 10;
      let tags = [];

      countTags();
      createTag();

      function countTags() {
        input.focus();
        tagNumb.innerText = tags.length;
      }

      function createTag() {
        ul.querySelectorAll("li").forEach((li) => li.remove());
        tags
          .slice()
          .reverse()
          .forEach((tag) => {
            let liTag = `<li>${tag} <input type="checkbox" checked value="${tag}" name="locations" readonly> <i class="uit uit-multiply" onclick="remove(this, '${tag}')"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="none">
<path d="M13.5 3.25H10.75V2.5C10.75 2.16848 10.6183 1.85054 10.3839 1.61612C10.1495 1.3817 9.83152 1.25 9.5 1.25H6.5C6.16848 1.25 5.85054 1.3817 5.61612 1.61612C5.3817 1.85054 5.25 2.16848 5.25 2.5V3.25H2.5C2.4337 3.25 2.37011 3.27634 2.32322 3.32322C2.27634 3.37011 2.25 3.4337 2.25 3.5C2.25 3.5663 2.27634 3.62989 2.32322 3.67678C2.37011 3.72366 2.4337 3.75 2.5 3.75H3.25V13C3.25 13.1989 3.32902 13.3897 3.46967 13.5303C3.61032 13.671 3.80109 13.75 4 13.75H12C12.1989 13.75 12.3897 13.671 12.5303 13.5303C12.671 13.3897 12.75 13.1989 12.75 13V3.75H13.5C13.5663 3.75 13.6299 3.72366 13.6768 3.67678C13.7237 3.62989 13.75 3.5663 13.75 3.5C13.75 3.4337 13.7237 3.37011 13.6768 3.32322C13.6299 3.27634 13.5663 3.25 13.5 3.25ZM5.75 2.5C5.75 2.30109 5.82902 2.11032 5.96967 1.96967C6.11032 1.82902 6.30109 1.75 6.5 1.75H9.5C9.69891 1.75 9.88968 1.82902 10.0303 1.96967C10.171 2.11032 10.25 2.30109 10.25 2.5V3.25H5.75V2.5ZM12.25 13C12.25 13.0663 12.2237 13.1299 12.1768 13.1768C12.1299 13.2237 12.0663 13.25 12 13.25H4C3.9337 13.25 3.87011 13.2237 3.82322 13.1768C3.77634 13.1299 3.75 13.0663 3.75 13V3.75H12.25V13ZM6.75 6.5V10.5C6.75 10.5663 6.72366 10.6299 6.67678 10.6768C6.62989 10.7237 6.5663 10.75 6.5 10.75C6.4337 10.75 6.37011 10.7237 6.32322 10.6768C6.27634 10.6299 6.25 10.5663 6.25 10.5V6.5C6.25 6.4337 6.27634 6.37011 6.32322 6.32322C6.37011 6.27634 6.4337 6.25 6.5 6.25C6.5663 6.25 6.62989 6.27634 6.67678 6.32322C6.72366 6.37011 6.75 6.4337 6.75 6.5ZM9.75 6.5V10.5C9.75 10.5663 9.72366 10.6299 9.67678 10.6768C9.62989 10.7237 9.5663 10.75 9.5 10.75C9.4337 10.75 9.37011 10.7237 9.32322 10.6768C9.27634 10.6299 9.25 10.5663 9.25 10.5V6.5C9.25 6.4337 9.27634 6.37011 9.32322 6.32322C9.37011 6.27634 9.4337 6.25 9.5 6.25C9.5663 6.25 9.62989 6.27634 9.67678 6.32322C9.72366 6.37011 9.75 6.4337 9.75 6.5Z" fill="black"/>
</svg></i></li>`;
            ul.insertAdjacentHTML("afterbegin", liTag);
          });
        countTags();
      }

      function remove(element, tag) {
        let index = tags.indexOf(tag);
        tags = [...tags.slice(0, index), ...tags.slice(index + 1)];
        element.parentElement.remove();
        countTags();
      }

      function addTagByButton() {
        let tag = input.value.replace(/\s+/g, " ");
        if (tag.length > 1 && !tags.includes(tag)) {
          if (tags.length < 10) {
            //   tag.split(",").forEach((tag) => {
            tags.push(tag);
            createTag();
            //   });
          }
        }
        input.value = "";
      }

      const removeBtn = document.querySelector(".details button");
      removeBtn.addEventListener("click", () => {
        tags.length = 0;
        ul.querySelectorAll("li").forEach((li) => li.remove());
        countTags();
      });

      const addButton = document.querySelector(".form__search button");
      addButton.addEventListener("click", addTagByButton);

      const filter = document.querySelector(".header__filtres");
      const blockfilter = document.querySelector(".pt");
      filter.addEventListener("click", () => {
        if (blockfilter.style.display == "block") {
          blockfilter.style.display = "none";
        } else {
          blockfilter.style.display = "block";
        }
      });
    </script>
    <!-- end filter -->
  </body>
</html>
